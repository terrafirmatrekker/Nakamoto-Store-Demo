{"ast":null,"code":"'use strict';\n\nvar _ = require('lodash');\n\nfunction format(message, args) {\n  return message.replace('{0}', args[0]).replace('{1}', args[1]).replace('{2}', args[2]);\n}\n\nvar traverseNode = function traverseNode(parent, errorDefinition) {\n  var NodeError = function NodeError() {\n    if (_.isString(errorDefinition.message)) {\n      this.message = format(errorDefinition.message, arguments);\n    } else if (_.isFunction(errorDefinition.message)) {\n      this.message = errorDefinition.message.apply(null, arguments);\n    } else {\n      throw new Error('Invalid error definition for ' + errorDefinition.name);\n    }\n\n    this.stack = this.message + '\\n' + new Error().stack;\n  };\n\n  NodeError.prototype = Object.create(parent.prototype);\n  NodeError.prototype.name = parent.prototype.name + errorDefinition.name;\n  parent[errorDefinition.name] = NodeError;\n\n  if (errorDefinition.errors) {\n    childDefinitions(NodeError, errorDefinition.errors);\n  }\n\n  return NodeError;\n};\n/* jshint latedef: false */\n\n\nvar childDefinitions = function childDefinitions(parent, _childDefinitions) {\n  _.each(_childDefinitions, function (childDefinition) {\n    traverseNode(parent, childDefinition);\n  });\n};\n/* jshint latedef: true */\n\n\nvar traverseRoot = function traverseRoot(parent, errorsDefinition) {\n  childDefinitions(parent, errorsDefinition);\n  return parent;\n};\n\nvar bitcore = {};\n\nbitcore.Error = function () {\n  this.message = 'Internal error';\n  this.stack = this.message + '\\n' + new Error().stack;\n};\n\nbitcore.Error.prototype = Object.create(Error.prototype);\nbitcore.Error.prototype.name = 'bitcore.Error';\n\nvar data = require('./spec');\n\ntraverseRoot(bitcore.Error, data);\nmodule.exports = bitcore.Error;\n\nmodule.exports.extend = function (spec) {\n  return traverseNode(bitcore.Error, spec);\n};","map":null,"metadata":{},"sourceType":"script"}