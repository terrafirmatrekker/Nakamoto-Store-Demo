{"ast":null,"code":"var cryptoUtils = require('./crypto/utils');\n\nmodule.exports = {\n  isValidAddress: function isValidAddress(address) {\n    if (!/^0x[0-9a-fA-F]{40}$/.test(address)) {\n      // Check if it has the basic requirements of an address\n      return false;\n    }\n\n    if (/^0x[0-9a-f]{40}$/.test(address) || /^0x?[0-9A-F]{40}$/.test(address)) {\n      // If it's all small caps or all all caps, return true\n      return true;\n    } // Otherwise check each case\n\n\n    return this.verifyChecksum(address);\n  },\n  verifyChecksum: function verifyChecksum(address) {\n    // Check each case\n    address = address.replace('0x', '');\n    var addressHash = cryptoUtils.keccak256(address.toLowerCase());\n\n    for (var i = 0; i < 40; i++) {\n      // The nth letter should be uppercase if the nth digit of casemap is 1\n      if (parseInt(addressHash[i], 16) > 7 && address[i].toUpperCase() !== address[i] || parseInt(addressHash[i], 16) <= 7 && address[i].toLowerCase() !== address[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n};","map":null,"metadata":{},"sourceType":"script"}