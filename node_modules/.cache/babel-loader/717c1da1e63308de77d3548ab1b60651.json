{"ast":null,"code":"'use strict';\n/**\n * Credits to https://github.com/cryptocoinjs/blake-hash\n */\n\nBlake256.sigma = [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], [14, 10, 4, 8, 9, 15, 13, 6, 1, 12, 0, 2, 11, 7, 5, 3], [11, 8, 12, 0, 5, 2, 15, 13, 10, 14, 3, 6, 7, 1, 9, 4], [7, 9, 3, 1, 13, 12, 11, 14, 2, 6, 5, 10, 4, 0, 15, 8], [9, 0, 5, 7, 2, 4, 10, 15, 14, 1, 11, 12, 6, 8, 3, 13], [2, 12, 6, 10, 0, 11, 8, 3, 4, 13, 7, 5, 15, 14, 1, 9], [12, 5, 1, 15, 14, 13, 4, 10, 0, 7, 6, 3, 9, 2, 8, 11], [13, 11, 7, 14, 12, 1, 3, 9, 5, 0, 15, 4, 8, 6, 2, 10], [6, 15, 14, 9, 11, 3, 0, 8, 12, 2, 13, 7, 1, 4, 10, 5], [10, 2, 8, 4, 7, 6, 1, 5, 15, 11, 9, 14, 3, 12, 13, 0], [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], [14, 10, 4, 8, 9, 15, 13, 6, 1, 12, 0, 2, 11, 7, 5, 3], [11, 8, 12, 0, 5, 2, 15, 13, 10, 14, 3, 6, 7, 1, 9, 4], [7, 9, 3, 1, 13, 12, 11, 14, 2, 6, 5, 10, 4, 0, 15, 8], [9, 0, 5, 7, 2, 4, 10, 15, 14, 1, 11, 12, 6, 8, 3, 13], [2, 12, 6, 10, 0, 11, 8, 3, 4, 13, 7, 5, 15, 14, 1, 9]];\nBlake256.u256 = [0x243f6a88, 0x85a308d3, 0x13198a2e, 0x03707344, 0xa4093822, 0x299f31d0, 0x082efa98, 0xec4e6c89, 0x452821e6, 0x38d01377, 0xbe5466cf, 0x34e90c6c, 0xc0ac29b7, 0xc97c50dd, 0x3f84d5b5, 0xb5470917];\nBlake256.padding = new Buffer([0x80, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\n\nBlake256.prototype._length_carry = function (arr) {\n  for (var j = 0; j < arr.length; ++j) {\n    if (arr[j] < 0x0100000000) break;\n    arr[j] -= 0x0100000000;\n    arr[j + 1] += 1;\n  }\n};\n\nBlake256.prototype.update = function (data, encoding) {\n  data = new Buffer(data, encoding);\n  var block = this._block;\n  var offset = 0;\n\n  while (this._blockOffset + data.length - offset >= block.length) {\n    for (var i = this._blockOffset; i < block.length;) {\n      block[i++] = data[offset++];\n    }\n\n    this._length[0] += block.length * 8;\n\n    this._length_carry(this._length);\n\n    this._compress();\n\n    this._blockOffset = 0;\n  }\n\n  while (offset < data.length) {\n    block[this._blockOffset++] = data[offset++];\n  }\n\n  return this;\n};\n\nvar zo = new Buffer([0x01]);\nvar oo = new Buffer([0x81]);\n\nfunction rot(x, n) {\n  return (x << 32 - n | x >>> n) >>> 0;\n}\n\nfunction g(v, m, i, a, b, c, d, e) {\n  var sigma = Blake256.sigma;\n  var u256 = Blake256.u256;\n  v[a] = v[a] + ((m[sigma[i][e]] ^ u256[sigma[i][e + 1]]) >>> 0) + v[b] >>> 0;\n  v[d] = rot(v[d] ^ v[a], 16);\n  v[c] = v[c] + v[d] >>> 0;\n  v[b] = rot(v[b] ^ v[c], 12);\n  v[a] = v[a] + ((m[sigma[i][e + 1]] ^ u256[sigma[i][e]]) >>> 0) + v[b] >>> 0;\n  v[d] = rot(v[d] ^ v[a], 8);\n  v[c] = v[c] + v[d] >>> 0;\n  v[b] = rot(v[b] ^ v[c], 7);\n}\n\nfunction Blake256() {\n  this._h = [0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19];\n  this._s = [0, 0, 0, 0];\n  this._block = new Buffer(64);\n  this._blockOffset = 0;\n  this._length = [0, 0];\n  this._nullt = false;\n  this._zo = zo;\n  this._oo = oo;\n}\n\nBlake256.prototype._compress = function () {\n  var u256 = Blake256.u256;\n  var v = new Array(16);\n  var m = new Array(16);\n  var i;\n\n  for (i = 0; i < 16; ++i) {\n    m[i] = this._block.readUInt32BE(i * 4);\n  }\n\n  for (i = 0; i < 8; ++i) {\n    v[i] = this._h[i] >>> 0;\n  }\n\n  for (i = 8; i < 12; ++i) {\n    v[i] = (this._s[i - 8] ^ u256[i - 8]) >>> 0;\n  }\n\n  for (i = 12; i < 16; ++i) {\n    v[i] = u256[i - 8];\n  }\n\n  if (!this._nullt) {\n    v[12] = (v[12] ^ this._length[0]) >>> 0;\n    v[13] = (v[13] ^ this._length[0]) >>> 0;\n    v[14] = (v[14] ^ this._length[1]) >>> 0;\n    v[15] = (v[15] ^ this._length[1]) >>> 0;\n  }\n\n  for (i = 0; i < 14; ++i) {\n    /* column step */\n    g(v, m, i, 0, 4, 8, 12, 0);\n    g(v, m, i, 1, 5, 9, 13, 2);\n    g(v, m, i, 2, 6, 10, 14, 4);\n    g(v, m, i, 3, 7, 11, 15, 6);\n    /* diagonal step */\n\n    g(v, m, i, 0, 5, 10, 15, 8);\n    g(v, m, i, 1, 6, 11, 12, 10);\n    g(v, m, i, 2, 7, 8, 13, 12);\n    g(v, m, i, 3, 4, 9, 14, 14);\n  }\n\n  for (i = 0; i < 16; ++i) {\n    this._h[i % 8] = (this._h[i % 8] ^ v[i]) >>> 0;\n  }\n\n  for (i = 0; i < 8; ++i) {\n    this._h[i] = (this._h[i] ^ this._s[i % 4]) >>> 0;\n  }\n};\n\nBlake256.prototype._padding = function () {\n  var lo = this._length[0] + this._blockOffset * 8;\n  var hi = this._length[1];\n\n  if (lo >= 0x0100000000) {\n    lo -= 0x0100000000;\n    hi += 1;\n  }\n\n  var msglen = new Buffer(8);\n  msglen.writeUInt32BE(hi, 0);\n  msglen.writeUInt32BE(lo, 4);\n\n  if (this._blockOffset === 55) {\n    this._length[0] -= 8;\n    this.update(this._oo);\n  } else {\n    if (this._blockOffset < 55) {\n      if (this._blockOffset === 0) this._nullt = true;\n      this._length[0] -= (55 - this._blockOffset) * 8;\n      this.update(Blake256.padding.slice(0, 55 - this._blockOffset));\n    } else {\n      this._length[0] -= (64 - this._blockOffset) * 8;\n      this.update(Blake256.padding.slice(0, 64 - this._blockOffset));\n      this._length[0] -= 55 * 8;\n      this.update(Blake256.padding.slice(1, 1 + 55));\n      this._nullt = true;\n    }\n\n    this.update(this._zo);\n    this._length[0] -= 8;\n  }\n\n  this._length[0] -= 64;\n  this.update(msglen);\n};\n\nBlake256.prototype.digest = function (encoding) {\n  this._padding();\n\n  var buffer = new Buffer(32);\n\n  for (var i = 0; i < 8; ++i) {\n    buffer.writeUInt32BE(this._h[i], i * 4);\n  }\n\n  return buffer.toString(encoding);\n};\n\nmodule.exports = Blake256;","map":null,"metadata":{},"sourceType":"script"}